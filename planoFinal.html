<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Segurança</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="imagens/anchor.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        crossorigin="anonymous">
</head>

<body class="plano">
    <div id="template-header"></div>
    <div class="container-fluid d-flex p-0">
        <div id="template-sidebar"></div>
        <main class="mainPlano">
            <h1 id="titulo">Plano de Segurança</h1>
            <section>
                <div class="container d-flex flex-column align-items-center pg_plano w-100" id="planoFinal">
                    <h2 class="tituloSecao">Finalizar Plano de Segurança</h2>
                    <h4 style="margin: 10px;">Deseja revisar alguma das páginas?</h4>
                    <div class="d-flex flex-column gap-2 m-4">
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 1 - Sinais de Alarme
                        </button>
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano2.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 2 - Como poderia lidar agora?
                        </button>
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano3.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 3 - Distrações sociais (lugares e pessoas)
                        </button>
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano4.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 4 - Rede de Apoio
                        </button>
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano5.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 5 - Ajuda Profissional
                        </button>
                        <button class="btn btn-primary btn-plano" type="button"
                            onclick="window.location.href='plano6.html'">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>
                            Revisar Página 6 - Ambiente Seguro
                        </button>
                    </div>

                    <div class="d-flex flex-column  text-justify gap-2 m-4">
                        <p> Você está prestes a finalizar o seu Plano de Segurança. <br>Certifique-se de que todas as
                            seções
                            estejam completas e revise as informações inseridas. <br>
                            Após a finalização, você poderá acessar o plano a qualquer momento para revisá-lo ou
                            atualizá-lo.
                        </p>
                    </div>
                    <form action="index.html" method="get">
                        <div class="form-group text-center">
                            <button type="button" class="btn btn-primary" id="encerrar" onclick="finalizarPlano()"> <i
                                    class="fa-solid fa-floppy-disk mr-2"></i> Finalizar Plano de
                                Segurança</button>
                        </div>
                    </form>
                </div>
                <div class="pg_plano" id="planoFinal2">
                    <nav aria-label="Navegação">
                        <ul class="pagination justify-content-between w-100">
                            <li class="page-item">
                                <button type="button" class="btn btn-final btn-cancel" id="cancelar">
                                    <i class="fa-solid fa-circle-xmark me-2"></i>
                                    Cancelar
                                </button>
                            </li>
                            <div class="d-flex">
                                <li class="page-item">
                                    <a href="#" class="page-link" id="prevPage">
                                        <i class="fa-solid fa-arrow-left mr-2"></i> Anterior
                                    </a>
                                </li>
                                <li class="page-item">
                                    <a class="page-link" href="#" id="nextPage">
                                        Próxima <i class="fa-solid fa-arrow-right ml-2"></i>
                                    </a>
                                </li>
                            </div>
                        </ul>
                    </nav>


                </div>
            </section>
        </main>

    </div>
    <div class="modal fade" id="modalConcluido" tabindex="-1" role="dialog" aria-labelledby="modalConcluidoLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content text-center p-4">
                <div class="modal-body">
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
                    <h3 class="mt-3">Plano Finalizado!</h3>
                    <p>Seu plano de segurança foi concluído com sucesso.</p>
                </div>
            </div>
        </div>
    </div>


    <script>

        document.getElementById('prevPage').addEventListener('click', function (e) {
            e.preventDefault();
            window.location.href = "plano6.html";
        });

        document.getElementById('nextPage').addEventListener('click', function (e) {
            e.preventDefault();
            alert("Você já está na última página.");
        });


        function finalizarPlano() {
            $('#modalConcluido').modal('show');

            setTimeout(() => {
                const campos = [
                    'pensamentos', 'descricao', 'sinais',
                    'outros', 'checkboxes',
                    'contatos', 'nomeLocal', 'telLocal',
                    'ambienteSeguro', 'desvantagens', 'contatoEmergencia',
                    'fromPage1', 'fromPage2', 'fromPage3'
                ];
                campos.forEach(chave => localStorage.removeItem(chave));

                window.location.href = "index.html";
            }, 1000);
        }




        async function loadTemplate(id, file) {
            const res = await fetch(file);
            const html = await res.text();
            document.getElementById(id).innerHTML = html;
        }
        loadTemplate('template-header', '_header.html');
        loadTemplate('template-sidebar', '_sidebar.html');

    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGaZT0I3EJrXAq8CC5RXUknUJ/"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="script.js"></script>
</body>

</html>